---
import PhTranslateBold from '@components/icons/phTranslateBold.astro';
import '@assets/styles/layout/header/side.css';
---

<aside class="flex justify-between items-center gap-4">
    <div id="switch-mode-container" title="Light mode" class="flex justify-between items-center gap-2">
        <input type="checkbox" class="hidden" id="mode" name="mode" />
        <label for="mode" class="block cursor-pointer group">
            <span class="sky">
                <span class="sphere group-active:w-6" />

                <span class="cloud scale-[0.35] translate-x-2.5 translate-y-0.5" />
                <span class="cloud scale-[0.35] translate-x-3.5 translate-y-2" />
                <span class="cloud scale-[0.3] translate-x-[1.15rem] translate-y-1" />

                <span class="star dark:translate-x-2.5 dark:translate-y-2.5" />
                <span class="star dark:translate-x-4 dark:translate-y-1" />
                <span class="star dark:translate-x-1.5 dark:translate-y-1.5" />
                <span class="star dark:translate-x-3.5 dark:translate-y-2" />
            </span>
        </label>
    </div>

    <div class="locale">
        <PhTranslateBold class:list="w-5 h-5 text-codgray-950" role="img" />

        <nav>
            <a href="/en" class="__active">en</a>
            <span role="separator">/</span>
            <a href="/fr">fr</a>
        </nav>
    </div>
</aside>

<script>
    const switchModeContainer = document.querySelector('#switch-mode-container');
    const modeInput = document.querySelector('#mode');

    modeInput?.addEventListener('change', (event) => {
        const target = event.currentTarget as HTMLInputElement;
        if (target && switchModeContainer) {
            if (target.checked) {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
                switchModeContainer.setAttribute('title', 'Dark mode');
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
                switchModeContainer.setAttribute('title', 'Light mode');
            }
        }
    });
</script>
